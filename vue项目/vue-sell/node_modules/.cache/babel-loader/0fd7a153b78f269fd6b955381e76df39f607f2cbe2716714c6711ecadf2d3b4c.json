{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { getGoods } from '@/api';\nimport SupportIcon from '@/components/support-icon/Support-icon.vue';\nimport BScroll from '@better-scroll/core';\nimport Cart from '@/components/cart/Cart.vue';\nexport default {\n  components: {\n    SupportIcon: SupportIcon,\n    Cart: Cart\n  },\n  data: function data() {\n    return {\n      goods: [],\n      currentIndex: 0,\n      foodList: [],\n      //各菜系的食物dom结构\n      foodBScroll: [],\n      scrollY: 0,\n      foodHeight: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n    // 获取商品数据\n    getGoods().then(function (res) {\n      console.log(res);\n      _this.goods = res;\n      _this.$nextTick(function () {\n        // $nextTick里面的回调会在页面加载完毕之后才执行\n        _this.betterScroll();\n        _this.getFoodHeight();\n      });\n    });\n  },\n  methods: {\n    betterScroll: function betterScroll() {\n      var _this2 = this;\n      // 获取到menu-wrapper的dom结构\n      new BScroll(this.$refs.menuWrapper, {\n        click: true\n      });\n      this.foodBScroll = new BScroll(this.$refs.foodsWrapper, {\n        click: true,\n        scroll: true,\n        probeType: 3\n      });\n      this.foodList = this.$refs.foodList;\n      this.foodBScroll.on('scroll', function (pos) {\n        _this2.scrollY = Math.round(Math.abs(pos.y));\n      });\n    },\n    selectMenu: function selectMenu(i) {\n      // console.log(i);\n      this.currentIndex = i;\n      this.foodBScroll.scrollToElement(this.foodList[i], 500);\n    },\n    getFoodHeight: function getFoodHeight() {\n      var _this3 = this;\n      var height = 0;\n      this.foodHeight.push(height);\n      this.foodList.forEach(function (foodheight) {\n        height += foodheight.clientHeight;\n        _this3.foodHeight.push(height);\n      });\n    }\n  }\n  // computed:{\n  //   computeHeight(){\n  //     const \n  //   }\n  // }\n};","map":{"version":3,"names":["getGoods","SupportIcon","BScroll","Cart","components","data","goods","currentIndex","foodList","foodBScroll","scrollY","foodHeight","created","_this","then","res","console","log","$nextTick","betterScroll","getFoodHeight","methods","_this2","$refs","menuWrapper","click","foodsWrapper","scroll","probeType","on","pos","Math","round","abs","y","selectMenu","i","scrollToElement","_this3","height","push","forEach","foodheight","clientHeight"],"sources":["C:\\Users\\方鹏\\Desktop\\codingSpace\\vue项目\\vue-sell\\src\\views\\goods\\index.vue"],"sourcesContent":["<template>\n  <div class=\"goods\">\n    <div class=\"goods-content\">\n      <div class=\"menu-wrapper\" ref=\"menuWrapper\">\n        <ul>\n          <li \n            class=\"menu-item\" \n            :class=\"{'current' : currentIndex === index}\"\n            v-for=\"(item, index) in goods\" \n            :key=\"index\"\n            @click=\"selectMenu(index)\"\n          >\n            <span class=\"text\">\n              <SupportIcon size=\"3\" :type=\"item.type\" v-if=\"item.type >= 0\"/>\n              {{item.name}}\n            </span>\n          </li>\n        </ul>\n      </div>  \n      <div class=\"foods-wrapper\" ref=\"foodsWrapper\">\n        <ul>\n          <!-- 一个菜系 -->\n          <li class=\"food-list\" v-for=\"(item,index) in goods\" :key=\"index\" ref=\"foodList\">\n            <h1 class=\"title\">{{ item.name }}</h1>\n            <!-- 一道一道菜 -->\n            <ul>\n              <li class=\"food-item\"  v-for=\"(food,index) in item.foods\" :key=\"index\">\n                <div class=\"pic\">\n                  <img :src=\"food.image\">\n                </div>\n                <div class=\"content\">\n                  <h2 class=\"name\">{{ food.name }}</h2>\n                  <p class=\"desc\">{{ food.description }}</p>\n                  <div class=\"extra\">\n                    <span class=\"count\">月售{{ food.sellCount }}份</span>\n                    <span>好评{{ food.rating }}%</span>\n                  </div>\n                  <div class=\"price\">\n                    <div>\n                      <span class=\"now\">￥{{ food.price }}</span>\n                      <span class=\"old\" v-show=\"food.oldPrice\">￥{{ food.oldPrice }}</span>\n                    </div>\n                    <div>\n                      <span class=\"cart-count\">1</span>\n                      <i class=\"iconfont icon-jia\"></i>\n                    </div>\n                  </div>\n                  <!-- + -->\n\n                </div>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \n    <Cart/>\n  </div>\n</template>\n\n<script>\nimport { getGoods } from '@/api'\nimport SupportIcon from '@/components/support-icon/Support-icon.vue'\nimport BScroll from '@better-scroll/core'\nimport Cart from '@/components/cart/Cart.vue'\nexport default {\n  components: {\n    SupportIcon,\n    Cart\n  },\n  data() {\n    return {\n      goods: [],\n      currentIndex: 0,\n      foodList:[],//各菜系的食物dom结构\n      foodBScroll:[],\n      scrollY:0,\n      foodHeight:[]\n    }\n  },\n  created() {\n    // 获取商品数据\n    getGoods().then(res => {\n      console.log(res);\n      this.goods = res\n      \n      this.$nextTick(() => { // $nextTick里面的回调会在页面加载完毕之后才执行\n        this.betterScroll()\n        this.getFoodHeight()\n      })\n    })\n  },\n  methods: {\n    betterScroll() {\n      // 获取到menu-wrapper的dom结构\n      new BScroll(this.$refs.menuWrapper, {\n        click: true\n      })\n      this.foodBScroll = new BScroll(this.$refs.foodsWrapper, {\n        click: true,\n        scroll: true,\n        probeType:3\n      })\n      this.foodList = this.$refs.foodList\n      this.foodBScroll.on('scroll',(pos)=>{\n        this.scrollY = Math.round(Math.abs(pos.y))\n      })\n    },\n    selectMenu(i) {\n      // console.log(i);\n      this.currentIndex = i\n      this.foodBScroll.scrollToElement(this.foodList[i],500)\n    },\n    getFoodHeight(){\n      let height = 0\n      this.foodHeight.push(height)\n      this.foodList.forEach((foodheight)=>{\n        height += foodheight.clientHeight\n        this.foodHeight.push(height)\n      })\n    }\n  },\n  // computed:{\n  //   computeHeight(){\n  //     const \n  //   }\n  // }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '@/common/style/variable.less';\n.goods{\n  position: absolute;\n  width: 100%;\n  bottom: 46px;\n  top: 177px;\n  overflow: hidden;\n  &-content{\n    display: flex;\n    height: 100%;\n    .menu-wrapper{\n      flex: 0 0 80px;\n      background: @color-background-ssss;\n      .menu-item{\n        padding: 0 14px;\n        font-size: @fontsize-small;\n        height: 54px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &.current{\n          background: #fff;\n          font-weight: 700;\n        }\n      }\n    }\n    .foods-wrapper{\n      flex: 1;\n      .title{\n        height: 26px;\n        line-height: 26px;\n        font-size: @fontsize-small;\n        color: rgb(147, 153, 159);\n        background: @color-background-ssss;\n        padding-left: 14px;\n        border-left: 2px solid #d9dde1;\n      }\n      .food-item{\n        display: flex;\n        padding-bottom: 18px;\n        margin: 18px;\n        .pic{\n          flex: 0 0 57px;\n          margin-right: 10px;\n          img{\n            width: 100%;\n          }\n        }\n        .content{\n          flex: 1;\n          .name{\n            font-size: @fontsize-medium;\n            color: rgb(7, 17, 27);\n            margin: 2px 0 8px 0;\n          }\n          .desc, .extra{\n            font-size: @fontsize-small-s;\n            color: rgb(147, 153, 159);\n            margin-bottom: 8px;\n            line-height: 10px;\n            .count{\n              margin-right: 12px;\n            }\n          }\n          .extra{\n            margin-bottom: 0px;\n            }\n          .price{\n            display: flex;\n            font-weight: 700;\n            line-height: 24px;\n            justify-content: space-between;\n            // align-items: center;\n            .now{\n              font-size: @fontsize-medium;\n              color: @color-red;\n              margin-right: 8px;\n            }\n            .old{\n              font-size: @fontsize-small-s;\n              color: rgb(147, 153, 159);\n              text-decoration: line-through;\n            }\n            .iconfont{\n              color: #00a0dc;\n              font-size: 22px;\n              margin-right: 6px;\n              align-items: center;\n              line-height: 33px;\n            }\n            .cart-count{\n              color: #666666;\n              font-size: 10px;\n              line-height: 28px;\n              text-align: center;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>"],"mappings":";;;;AA8DA,SAASA,QAAO,QAAS,OAAM;AAC/B,OAAOC,WAAU,MAAO,4CAA2C;AACnE,OAAOC,OAAM,MAAO,qBAAoB;AACxC,OAAOC,IAAG,MAAO,4BAA2B;AAC5C,eAAe;EACbC,UAAU,EAAE;IACVH,WAAW,EAAXA,WAAW;IACXE,IAAG,EAAHA;EACF,CAAC;EACDE,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,CAAC;MACfC,QAAQ,EAAC,EAAE;MAAC;MACZC,WAAW,EAAC,EAAE;MACdC,OAAO,EAAC,CAAC;MACTC,UAAU,EAAC;IACb;EACF,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IAAA,IAAAC,KAAA;IACR;IACAb,QAAQ,CAAC,CAAC,CAACc,IAAI,CAAC,UAAAC,GAAE,EAAK;MACrBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBF,KAAI,CAACP,KAAI,GAAIS,GAAE;MAEfF,KAAI,CAACK,SAAS,CAAC,YAAM;QAAE;QACrBL,KAAI,CAACM,YAAY,CAAC;QAClBN,KAAI,CAACO,aAAa,CAAC;MACrB,CAAC;IACH,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPF,YAAY,WAAAA,aAAA,EAAG;MAAA,IAAAG,MAAA;MACb;MACA,IAAIpB,OAAO,CAAC,IAAI,CAACqB,KAAK,CAACC,WAAW,EAAE;QAClCC,KAAK,EAAE;MACT,CAAC;MACD,IAAI,CAAChB,WAAU,GAAI,IAAIP,OAAO,CAAC,IAAI,CAACqB,KAAK,CAACG,YAAY,EAAE;QACtDD,KAAK,EAAE,IAAI;QACXE,MAAM,EAAE,IAAI;QACZC,SAAS,EAAC;MACZ,CAAC;MACD,IAAI,CAACpB,QAAO,GAAI,IAAI,CAACe,KAAK,CAACf,QAAO;MAClC,IAAI,CAACC,WAAW,CAACoB,EAAE,CAAC,QAAQ,EAAC,UAACC,GAAG,EAAG;QAClCR,MAAI,CAACZ,OAAM,GAAIqB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACH,GAAG,CAACI,CAAC,CAAC;MAC3C,CAAC;IACH,CAAC;IACDC,UAAU,WAAAA,WAACC,CAAC,EAAE;MACZ;MACA,IAAI,CAAC7B,YAAW,GAAI6B,CAAA;MACpB,IAAI,CAAC3B,WAAW,CAAC4B,eAAe,CAAC,IAAI,CAAC7B,QAAQ,CAAC4B,CAAC,CAAC,EAAC,GAAG;IACvD,CAAC;IACDhB,aAAa,WAAAA,cAAA,EAAE;MAAA,IAAAkB,MAAA;MACb,IAAIC,MAAK,GAAI;MACb,IAAI,CAAC5B,UAAU,CAAC6B,IAAI,CAACD,MAAM;MAC3B,IAAI,CAAC/B,QAAQ,CAACiC,OAAO,CAAC,UAACC,UAAU,EAAG;QAClCH,MAAK,IAAKG,UAAU,CAACC,YAAW;QAChCL,MAAI,CAAC3B,UAAU,CAAC6B,IAAI,CAACD,MAAM;MAC7B,CAAC;IACH;EACF;EACA;EACA;EACA;EACA;EACA;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}