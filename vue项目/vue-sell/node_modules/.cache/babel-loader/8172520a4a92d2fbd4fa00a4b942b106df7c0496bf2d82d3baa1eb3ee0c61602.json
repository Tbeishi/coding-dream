{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-58de782f\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"goods\"\n};\nvar _hoisted_2 = {\n  \"class\": \"goods-content\"\n};\nvar _hoisted_3 = {\n  \"class\": \"menu-wrapper\",\n  ref: \"menuWrapper\"\n};\nvar _hoisted_4 = [\"onClick\"];\nvar _hoisted_5 = {\n  \"class\": \"text\"\n};\nvar _hoisted_6 = {\n  \"class\": \"foods-wrapper\",\n  ref: \"foodsWrapper\"\n};\nvar _hoisted_7 = {\n  \"class\": \"title\"\n};\nvar _hoisted_8 = {\n  \"class\": \"pic\"\n};\nvar _hoisted_9 = [\"src\"];\nvar _hoisted_10 = {\n  \"class\": \"content\"\n};\nvar _hoisted_11 = {\n  \"class\": \"name\"\n};\nvar _hoisted_12 = {\n  \"class\": \"desc\"\n};\nvar _hoisted_13 = {\n  \"class\": \"extra\"\n};\nvar _hoisted_14 = {\n  \"class\": \"count\"\n};\nvar _hoisted_15 = {\n  \"class\": \"price\"\n};\nvar _hoisted_16 = {\n  \"class\": \"price-context\"\n};\nvar _hoisted_17 = {\n  \"class\": \"now\"\n};\nvar _hoisted_18 = {\n  \"class\": \"cart-context\"\n};\nvar _hoisted_19 = [\"onClick\"];\nvar _hoisted_20 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_SupportIcon = _resolveComponent(\"SupportIcon\");\n  var _component_Cart = _resolveComponent(\"Cart\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.goods, function (item, index) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      \"class\": _normalizeClass([\"menu-item\", {\n        'current': $data.currentIndex === index\n      }]),\n      key: index,\n      onClick: function onClick($event) {\n        return $options.selectMenu(index);\n      }\n    }, [_createElementVNode(\"span\", _hoisted_5, [item.type >= 0 ? (_openBlock(), _createBlock(_component_SupportIcon, {\n      key: 0,\n      size: \"3\",\n      type: item.type\n    }, null, 8 /* PROPS */, [\"type\"])) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString(item.name), 1 /* TEXT */)])], 10 /* CLASS, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"ul\", null, [_createCommentVNode(\" 一个菜系 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.goods, function (item, index1) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      \"class\": \"food-list\",\n      key: index1,\n      ref_for: true,\n      ref: \"foodList\"\n    }, [_createElementVNode(\"h1\", _hoisted_7, _toDisplayString(item.name), 1 /* TEXT */), _createCommentVNode(\" 一道一道菜 \"), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.foods, function (food, index2) {\n      return _openBlock(), _createElementBlock(\"li\", {\n        \"class\": \"food-item\",\n        key: index2\n      }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"img\", {\n        src: food.image\n      }, null, 8 /* PROPS */, _hoisted_9)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"h2\", _hoisted_11, _toDisplayString(food.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, _toDisplayString(food.description), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, \"月售\" + _toDisplayString(food.sellCount) + \"份\", 1 /* TEXT */), _createElementVNode(\"span\", null, \"好评率\" + _toDisplayString(food.rating) + \"%\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"span\", _hoisted_17, \"￥\" + _toDisplayString(food.price), 1 /* TEXT */), _withDirectives(_createElementVNode(\"span\", {\n        \"class\": \"old\"\n      }, \"￥\" + _toDisplayString(food.oldPrice), 513 /* TEXT, NEED_PATCH */), [[_vShow, food.oldPrice]])]), _createElementVNode(\"div\", _hoisted_18, [_withDirectives(_createElementVNode(\"i\", {\n        \"class\": \"iconfont icon-jianshao\",\n        onClick: function onClick($event) {\n          return _ctx.jianFood(index1, index2);\n        }\n      }, null, 8 /* PROPS */, _hoisted_19), [[_vShow, $data.cartCount > 0]]), _withDirectives(_createElementVNode(\"span\", {\n        \"class\": \"cart-count\"\n      }, _toDisplayString($data.cartCount[index1]), 513 /* TEXT, NEED_PATCH */), [[_vShow, $data.cartCount[index1][index2] && $data.cartCount[index1][index2] > 0]]), _createElementVNode(\"i\", {\n        \"class\": \"iconfont icon-jia\",\n        onClick: function onClick($event) {\n          return _ctx.addFood(index1, index2);\n        }\n      }, null, 8 /* PROPS */, _hoisted_20)])]), _createCommentVNode(\" + \")])]);\n    }), 128 /* KEYED_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */)]), _createVNode(_component_Cart)]);\n}","map":{"version":3,"names":["ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","goods","item","index","_normalizeClass","currentIndex","key","onClick","$event","$options","selectMenu","_hoisted_5","type","_createBlock","_component_SupportIcon","size","_toDisplayString","name","_hoisted_6","_createCommentVNode","index1","_hoisted_7","foods","food","index2","_hoisted_8","src","image","_hoisted_10","_hoisted_11","_hoisted_12","description","_hoisted_13","_hoisted_14","sellCount","rating","_hoisted_15","_hoisted_16","_hoisted_17","price","oldPrice","_hoisted_18","_ctx","jianFood","cartCount","addFood","_createVNode","_component_Cart"],"sources":["C:\\Users\\方鹏\\Desktop\\codingSpace\\vue项目\\vue-sell\\src\\views\\goods\\index.vue"],"sourcesContent":["<template>\n  <div class=\"goods\">\n    <div class=\"goods-content\">\n      <div class=\"menu-wrapper\" ref=\"menuWrapper\">\n        <ul>\n          <li \n            class=\"menu-item\" \n            :class=\"{'current' : currentIndex === index}\"\n            v-for=\"(item, index) in goods\" \n            :key=\"index\"\n            @click=\"selectMenu(index)\"\n          >\n            <span class=\"text\">\n              <SupportIcon size=\"3\" :type=\"item.type\" v-if=\"item.type >= 0\"/>\n              {{item.name}}\n            </span>\n          </li>\n        </ul>\n      </div>  \n      <div class=\"foods-wrapper\" ref=\"foodsWrapper\">\n        <ul>\n          <!-- 一个菜系 -->\n          <li class=\"food-list\" v-for=\"(item,index1) in goods\" :key=\"index1\" ref=\"foodList\">\n            <h1 class=\"title\">{{ item.name }}</h1>\n            <!-- 一道一道菜 -->\n            <ul>\n              <li class=\"food-item\"  v-for=\"(food,index2) in item.foods\" :key=\"index2\">\n                <div class=\"pic\">\n                  <img :src=\"food.image\">\n                </div>\n                <div class=\"content\">\n                  <h2 class=\"name\">{{ food.name }}</h2>\n                  <p class=\"desc\">{{ food.description }}</p>\n                  <div class=\"extra\">\n                    <span class=\"count\">月售{{ food.sellCount }}份</span>\n                    <span>好评率{{ food.rating }}%</span>\n                  </div>\n                  <div class=\"price\">\n                    <div class=\"price-context\">\n                      <span class=\"now\">￥{{ food.price }}</span>\n                      <span class=\"old\" v-show=\"food.oldPrice\">￥{{ food.oldPrice }}</span>\n                    </div>\n                    <div class=\"cart-context\">\n                      <i class=\"iconfont icon-jianshao\" v-show=\"cartCount > 0\"  @click=\"jianFood(index1,index2)\"></i>\n                      <span class=\"cart-count\" v-show=\"cartCount[index1][index2] && cartCount[index1][index2]> 0\">{{ cartCount[index1] }}</span>\n                      <i class=\"iconfont icon-jia\" @click=\"addFood(index1,index2)\"></i>\n                    </div>\n                  </div>\n                  <!-- + -->\n\n                </div>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \n    <Cart/>\n  </div>\n</template>\n\n<script>\nimport { getGoods } from '@/api'\nimport SupportIcon from '@/components/support-icon/Support-icon.vue'\nimport BScroll from '@better-scroll/core'\nimport Cart from '@/components/cart/Cart.vue'\nexport default {\n  components: {\n    SupportIcon,\n    Cart\n  },\n  data() {\n    return {\n      goods: [],\n      currentIndex: 0,\n      foodList:[],//各菜系的食物dom结构\n      foodBScroll:[],\n      scrollY:0,\n      foodHeight:[],\n      cartCount:[],\n    }\n  },\n  created() {\n    // 获取商品数据\n    getGoods().then(res => {\n      console.log(res);\n      this.goods = res\n      \n      this.$nextTick(() => { // $nextTick里面的回调会在页面加载完毕之后才执行\n        this.betterScroll()\n        this.getFoodHeight()\n        this.goods.forEach((item,index)=>{\n          const arr = []\n          item.foods.forEach(()=>{ arr.push(1)})\n          this.cartCount.push(arr)\n          console.log(this.cartCount);\n        })\n      })\n    })\n  },\n  methods: {\n    betterScroll() {\n      // 获取到menu-wrapper的dom结构\n      new BScroll(this.$refs.menuWrapper, {\n        click: true\n      })\n      this.foodBScroll = new BScroll(this.$refs.foodsWrapper, {\n        click: true,\n        scroll: true,\n        probeType:3\n      })\n      this.foodList = this.$refs.foodList\n      this.foodBScroll.on('scroll',(pos)=>{\n        this.scrollY = Math.round(Math.abs(pos.y))\n      })\n    },\n    selectMenu(i) {\n      // console.log(i);\n      this.currentIndex = i\n      this.foodBScroll.scrollToElement(this.foodList[i],500)\n    },\n    selectFood(i,y) {\n      console.log(i,y);\n    },\n    getFoodHeight(){\n      let height = 0\n      this.foodHeight.push(height)\n      this.foodList.forEach((foodheight)=>{\n        height += foodheight.clientHeight\n        this.foodHeight.push(height)\n      })\n    }\n  },\n  // computed:{\n  //   computeHeight(){\n  //     const \n  //   }\n  // }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '@/common/style/variable.less';\n.goods{\n  position: absolute;\n  width: 100%;\n  bottom: 46px;\n  top: 177px;\n  overflow: hidden;\n  &-content{\n    display: flex;\n    height: 100%;\n    .menu-wrapper{\n      flex: 0 0 80px;\n      background: @color-background-ssss;\n      .menu-item{\n        padding: 0 14px;\n        font-size: @fontsize-small;\n        height: 54px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &.current{\n          background: #fff;\n          font-weight: 700;\n        }\n      }\n    }\n    .foods-wrapper{\n      flex: 1;\n      .title{\n        height: 26px;\n        line-height: 26px;\n        font-size: @fontsize-small;\n        color: rgb(147, 153, 159);\n        background: @color-background-ssss;\n        padding-left: 14px;\n        border-left: 2px solid #d9dde1;\n      }\n      .food-item{\n        display: flex;\n        padding-bottom: 18px;\n        margin: 18px;\n        .pic{\n          flex: 0 0 57px;\n          margin-right: 10px;\n          img{\n            width: 100%;\n          }\n        }\n        .content{\n          flex: 1;\n          .name{\n            font-size: @fontsize-medium;\n            color: rgb(7, 17, 27);\n            margin: 2px 0 8px 0;\n          }\n          .desc, .extra{\n            font-size: @fontsize-small-s;\n            color: rgb(147, 153, 159);\n            margin-bottom: 8px;\n            line-height: 10px;\n            .count{\n              margin-right: 12px;\n            }\n          }\n          .extra{\n            margin-bottom: 0px;\n            }\n          .price{\n            display: flex;\n            font-weight: 700;\n            line-height: 24px;\n            height: 24px;\n            justify-content: space-between;\n            // align-items: center;\n\n            .price-context{\n              .now{\n              font-size: @fontsize-medium;\n              color: @color-red;\n              margin-right: 8px;\n            }\n            .old{\n              font-size: @fontsize-small-s;\n              color: rgb(147, 153, 159);\n              text-decoration: line-through;\n            }\n            }\n           \n            .cart-context{\n            margin-top: -2px;\n              .iconfont{\n              color: #00a0dc;\n              font-size: 22px;\n              padding: 6px;\n              vertical-align: middle;\n            }\n            .cart-count{\n              display: inline-block;\n              color: #8e8e8e;\n              font-size: 10px;\n              width: 12px;\n              text-align: center;\n            }\n            }\n            \n          }\n        }\n      }\n    }\n  }\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}