{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\n// Utils\nimport { createNamespace } from '../utils';\nimport { isHidden } from '../utils/dom/style';\nimport { getScroller } from '../utils/dom/scroll'; // Mixins\n\nimport { BindEventMixin } from '../mixins/bind-event'; // Components\n\nimport Loading from '../loading';\nvar _createNamespace = createNamespace('list'),\n  createComponent = _createNamespace[0],\n  bem = _createNamespace[1],\n  t = _createNamespace[2];\nexport default createComponent({\n  mixins: [BindEventMixin(function (bind) {\n    if (!this.scroller) {\n      this.scroller = getScroller(this.$el);\n    }\n    bind(this.scroller, 'scroll', this.check);\n  })],\n  model: {\n    prop: 'loading'\n  },\n  props: {\n    error: Boolean,\n    loading: Boolean,\n    finished: Boolean,\n    errorText: String,\n    loadingText: String,\n    finishedText: String,\n    immediateCheck: {\n      type: Boolean,\n      \"default\": true\n    },\n    offset: {\n      type: [Number, String],\n      \"default\": 300\n    },\n    direction: {\n      type: String,\n      \"default\": 'down'\n    }\n  },\n  data: function data() {\n    return {\n      // use sync innerLoading state to avoid repeated loading in some edge cases\n      innerLoading: this.loading\n    };\n  },\n  updated: function updated() {\n    this.innerLoading = this.loading;\n  },\n  mounted: function mounted() {\n    if (this.immediateCheck) {\n      this.check();\n    }\n  },\n  watch: {\n    loading: 'check',\n    finished: 'check'\n  },\n  methods: {\n    // @exposed-api\n    check: function check() {\n      var _this = this;\n      this.$nextTick(function () {\n        if (_this.innerLoading || _this.finished || _this.error) {\n          return;\n        }\n        var el = _this.$el,\n          scroller = _this.scroller,\n          offset = _this.offset,\n          direction = _this.direction;\n        var scrollerRect;\n        if (scroller.getBoundingClientRect) {\n          scrollerRect = scroller.getBoundingClientRect();\n        } else {\n          scrollerRect = {\n            top: 0,\n            bottom: scroller.innerHeight\n          };\n        }\n        var scrollerHeight = scrollerRect.bottom - scrollerRect.top;\n        /* istanbul ignore next */\n\n        if (!scrollerHeight || isHidden(el)) {\n          return false;\n        }\n        var isReachEdge = false;\n        var placeholderRect = _this.$refs.placeholder.getBoundingClientRect();\n        if (direction === 'up') {\n          isReachEdge = scrollerRect.top - placeholderRect.top <= offset;\n        } else {\n          isReachEdge = placeholderRect.bottom - scrollerRect.bottom <= offset;\n        }\n        if (isReachEdge) {\n          _this.innerLoading = true;\n          _this.$emit('input', true);\n          _this.$emit('load');\n        }\n      });\n    },\n    clickErrorText: function clickErrorText() {\n      this.$emit('update:error', false);\n      this.check();\n    },\n    genLoading: function genLoading() {\n      var h = this.$createElement;\n      if (this.innerLoading && !this.finished) {\n        return h(\"div\", {\n          \"key\": \"loading\",\n          \"class\": bem('loading')\n        }, [this.slots('loading') || h(Loading, {\n          \"attrs\": {\n            \"size\": \"16\"\n          }\n        }, [this.loadingText || t('loading')])]);\n      }\n    },\n    genFinishedText: function genFinishedText() {\n      var h = this.$createElement;\n      if (this.finished) {\n        var text = this.slots('finished') || this.finishedText;\n        if (text) {\n          return h(\"div\", {\n            \"class\": bem('finished-text')\n          }, [text]);\n        }\n      }\n    },\n    genErrorText: function genErrorText() {\n      var h = this.$createElement;\n      if (this.error) {\n        var text = this.slots('error') || this.errorText;\n        if (text) {\n          return h(\"div\", {\n            \"on\": {\n              \"click\": this.clickErrorText\n            },\n            \"class\": bem('error-text')\n          }, [text]);\n        }\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var Placeholder = h(\"div\", {\n      \"ref\": \"placeholder\",\n      \"key\": \"placeholder\",\n      \"class\": bem('placeholder')\n    });\n    return h(\"div\", {\n      \"class\": bem(),\n      \"attrs\": {\n        \"role\": \"feed\",\n        \"aria-busy\": this.innerLoading\n      }\n    }, [this.direction === 'down' ? this.slots() : Placeholder, this.genLoading(), this.genFinishedText(), this.genErrorText(), this.direction === 'up' ? this.slots() : Placeholder]);\n  }\n});","map":{"version":3,"names":["createNamespace","isHidden","getScroller","BindEventMixin","Loading","_createNamespace","createComponent","bem","t","mixins","bind","scroller","$el","check","model","prop","props","error","Boolean","loading","finished","errorText","String","loadingText","finishedText","immediateCheck","type","offset","Number","direction","data","innerLoading","updated","mounted","watch","methods","_this","$nextTick","el","scrollerRect","getBoundingClientRect","top","bottom","innerHeight","scrollerHeight","isReachEdge","placeholderRect","$refs","placeholder","$emit","clickErrorText","genLoading","h","$createElement","slots","genFinishedText","text","genErrorText","render","arguments","Placeholder"],"sources":["C:/Users/方鹏/Desktop/codingSpace/vue项目/vue-sell/node_modules/vant/es/list/index.js"],"sourcesContent":["// Utils\nimport { createNamespace } from '../utils';\nimport { isHidden } from '../utils/dom/style';\nimport { getScroller } from '../utils/dom/scroll'; // Mixins\n\nimport { BindEventMixin } from '../mixins/bind-event'; // Components\n\nimport Loading from '../loading';\n\nvar _createNamespace = createNamespace('list'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  mixins: [BindEventMixin(function (bind) {\n    if (!this.scroller) {\n      this.scroller = getScroller(this.$el);\n    }\n\n    bind(this.scroller, 'scroll', this.check);\n  })],\n  model: {\n    prop: 'loading'\n  },\n  props: {\n    error: Boolean,\n    loading: Boolean,\n    finished: Boolean,\n    errorText: String,\n    loadingText: String,\n    finishedText: String,\n    immediateCheck: {\n      type: Boolean,\n      default: true\n    },\n    offset: {\n      type: [Number, String],\n      default: 300\n    },\n    direction: {\n      type: String,\n      default: 'down'\n    }\n  },\n  data: function data() {\n    return {\n      // use sync innerLoading state to avoid repeated loading in some edge cases\n      innerLoading: this.loading\n    };\n  },\n  updated: function updated() {\n    this.innerLoading = this.loading;\n  },\n  mounted: function mounted() {\n    if (this.immediateCheck) {\n      this.check();\n    }\n  },\n  watch: {\n    loading: 'check',\n    finished: 'check'\n  },\n  methods: {\n    // @exposed-api\n    check: function check() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        if (_this.innerLoading || _this.finished || _this.error) {\n          return;\n        }\n\n        var el = _this.$el,\n            scroller = _this.scroller,\n            offset = _this.offset,\n            direction = _this.direction;\n        var scrollerRect;\n\n        if (scroller.getBoundingClientRect) {\n          scrollerRect = scroller.getBoundingClientRect();\n        } else {\n          scrollerRect = {\n            top: 0,\n            bottom: scroller.innerHeight\n          };\n        }\n\n        var scrollerHeight = scrollerRect.bottom - scrollerRect.top;\n        /* istanbul ignore next */\n\n        if (!scrollerHeight || isHidden(el)) {\n          return false;\n        }\n\n        var isReachEdge = false;\n\n        var placeholderRect = _this.$refs.placeholder.getBoundingClientRect();\n\n        if (direction === 'up') {\n          isReachEdge = scrollerRect.top - placeholderRect.top <= offset;\n        } else {\n          isReachEdge = placeholderRect.bottom - scrollerRect.bottom <= offset;\n        }\n\n        if (isReachEdge) {\n          _this.innerLoading = true;\n\n          _this.$emit('input', true);\n\n          _this.$emit('load');\n        }\n      });\n    },\n    clickErrorText: function clickErrorText() {\n      this.$emit('update:error', false);\n      this.check();\n    },\n    genLoading: function genLoading() {\n      var h = this.$createElement;\n\n      if (this.innerLoading && !this.finished) {\n        return h(\"div\", {\n          \"key\": \"loading\",\n          \"class\": bem('loading')\n        }, [this.slots('loading') || h(Loading, {\n          \"attrs\": {\n            \"size\": \"16\"\n          }\n        }, [this.loadingText || t('loading')])]);\n      }\n    },\n    genFinishedText: function genFinishedText() {\n      var h = this.$createElement;\n\n      if (this.finished) {\n        var text = this.slots('finished') || this.finishedText;\n\n        if (text) {\n          return h(\"div\", {\n            \"class\": bem('finished-text')\n          }, [text]);\n        }\n      }\n    },\n    genErrorText: function genErrorText() {\n      var h = this.$createElement;\n\n      if (this.error) {\n        var text = this.slots('error') || this.errorText;\n\n        if (text) {\n          return h(\"div\", {\n            \"on\": {\n              \"click\": this.clickErrorText\n            },\n            \"class\": bem('error-text')\n          }, [text]);\n        }\n      }\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var Placeholder = h(\"div\", {\n      \"ref\": \"placeholder\",\n      \"key\": \"placeholder\",\n      \"class\": bem('placeholder')\n    });\n    return h(\"div\", {\n      \"class\": bem(),\n      \"attrs\": {\n        \"role\": \"feed\",\n        \"aria-busy\": this.innerLoading\n      }\n    }, [this.direction === 'down' ? this.slots() : Placeholder, this.genLoading(), this.genFinishedText(), this.genErrorText(), this.direction === 'up' ? this.slots() : Placeholder]);\n  }\n});"],"mappings":";AAAA;AACA,SAASA,eAAe,QAAQ,UAAU;AAC1C,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,WAAW,QAAQ,qBAAqB,CAAC,CAAC;;AAEnD,SAASC,cAAc,QAAQ,sBAAsB,CAAC,CAAC;;AAEvD,OAAOC,OAAO,MAAM,YAAY;AAEhC,IAAIC,gBAAgB,GAAGL,eAAe,CAAC,MAAM,CAAC;EAC1CM,eAAe,GAAGD,gBAAgB,CAAC,CAAC,CAAC;EACrCE,GAAG,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EACzBG,CAAC,GAAGH,gBAAgB,CAAC,CAAC,CAAC;AAE3B,eAAeC,eAAe,CAAC;EAC7BG,MAAM,EAAE,CAACN,cAAc,CAAC,UAAUO,IAAI,EAAE;IACtC,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE;MAClB,IAAI,CAACA,QAAQ,GAAGT,WAAW,CAAC,IAAI,CAACU,GAAG,CAAC;IACvC;IAEAF,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACE,KAAK,CAAC;EAC3C,CAAC,CAAC,CAAC;EACHC,KAAK,EAAE;IACLC,IAAI,EAAE;EACR,CAAC;EACDC,KAAK,EAAE;IACLC,KAAK,EAAEC,OAAO;IACdC,OAAO,EAAED,OAAO;IAChBE,QAAQ,EAAEF,OAAO;IACjBG,SAAS,EAAEC,MAAM;IACjBC,WAAW,EAAED,MAAM;IACnBE,YAAY,EAAEF,MAAM;IACpBG,cAAc,EAAE;MACdC,IAAI,EAAER,OAAO;MACb,WAAS;IACX,CAAC;IACDS,MAAM,EAAE;MACND,IAAI,EAAE,CAACE,MAAM,EAAEN,MAAM,CAAC;MACtB,WAAS;IACX,CAAC;IACDO,SAAS,EAAE;MACTH,IAAI,EAAEJ,MAAM;MACZ,WAAS;IACX;EACF,CAAC;EACDQ,IAAI,EAAE,SAASA,IAAIA,CAAA,EAAG;IACpB,OAAO;MACL;MACAC,YAAY,EAAE,IAAI,CAACZ;IACrB,CAAC;EACH,CAAC;EACDa,OAAO,EAAE,SAASA,OAAOA,CAAA,EAAG;IAC1B,IAAI,CAACD,YAAY,GAAG,IAAI,CAACZ,OAAO;EAClC,CAAC;EACDc,OAAO,EAAE,SAASA,OAAOA,CAAA,EAAG;IAC1B,IAAI,IAAI,CAACR,cAAc,EAAE;MACvB,IAAI,CAACZ,KAAK,CAAC,CAAC;IACd;EACF,CAAC;EACDqB,KAAK,EAAE;IACLf,OAAO,EAAE,OAAO;IAChBC,QAAQ,EAAE;EACZ,CAAC;EACDe,OAAO,EAAE;IACP;IACAtB,KAAK,EAAE,SAASA,KAAKA,CAAA,EAAG;MACtB,IAAIuB,KAAK,GAAG,IAAI;MAEhB,IAAI,CAACC,SAAS,CAAC,YAAY;QACzB,IAAID,KAAK,CAACL,YAAY,IAAIK,KAAK,CAAChB,QAAQ,IAAIgB,KAAK,CAACnB,KAAK,EAAE;UACvD;QACF;QAEA,IAAIqB,EAAE,GAAGF,KAAK,CAACxB,GAAG;UACdD,QAAQ,GAAGyB,KAAK,CAACzB,QAAQ;UACzBgB,MAAM,GAAGS,KAAK,CAACT,MAAM;UACrBE,SAAS,GAAGO,KAAK,CAACP,SAAS;QAC/B,IAAIU,YAAY;QAEhB,IAAI5B,QAAQ,CAAC6B,qBAAqB,EAAE;UAClCD,YAAY,GAAG5B,QAAQ,CAAC6B,qBAAqB,CAAC,CAAC;QACjD,CAAC,MAAM;UACLD,YAAY,GAAG;YACbE,GAAG,EAAE,CAAC;YACNC,MAAM,EAAE/B,QAAQ,CAACgC;UACnB,CAAC;QACH;QAEA,IAAIC,cAAc,GAAGL,YAAY,CAACG,MAAM,GAAGH,YAAY,CAACE,GAAG;QAC3D;;QAEA,IAAI,CAACG,cAAc,IAAI3C,QAAQ,CAACqC,EAAE,CAAC,EAAE;UACnC,OAAO,KAAK;QACd;QAEA,IAAIO,WAAW,GAAG,KAAK;QAEvB,IAAIC,eAAe,GAAGV,KAAK,CAACW,KAAK,CAACC,WAAW,CAACR,qBAAqB,CAAC,CAAC;QAErE,IAAIX,SAAS,KAAK,IAAI,EAAE;UACtBgB,WAAW,GAAGN,YAAY,CAACE,GAAG,GAAGK,eAAe,CAACL,GAAG,IAAId,MAAM;QAChE,CAAC,MAAM;UACLkB,WAAW,GAAGC,eAAe,CAACJ,MAAM,GAAGH,YAAY,CAACG,MAAM,IAAIf,MAAM;QACtE;QAEA,IAAIkB,WAAW,EAAE;UACfT,KAAK,CAACL,YAAY,GAAG,IAAI;UAEzBK,KAAK,CAACa,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC;UAE1Bb,KAAK,CAACa,KAAK,CAAC,MAAM,CAAC;QACrB;MACF,CAAC,CAAC;IACJ,CAAC;IACDC,cAAc,EAAE,SAASA,cAAcA,CAAA,EAAG;MACxC,IAAI,CAACD,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC;MACjC,IAAI,CAACpC,KAAK,CAAC,CAAC;IACd,CAAC;IACDsC,UAAU,EAAE,SAASA,UAAUA,CAAA,EAAG;MAChC,IAAIC,CAAC,GAAG,IAAI,CAACC,cAAc;MAE3B,IAAI,IAAI,CAACtB,YAAY,IAAI,CAAC,IAAI,CAACX,QAAQ,EAAE;QACvC,OAAOgC,CAAC,CAAC,KAAK,EAAE;UACd,KAAK,EAAE,SAAS;UAChB,OAAO,EAAE7C,GAAG,CAAC,SAAS;QACxB,CAAC,EAAE,CAAC,IAAI,CAAC+C,KAAK,CAAC,SAAS,CAAC,IAAIF,CAAC,CAAChD,OAAO,EAAE;UACtC,OAAO,EAAE;YACP,MAAM,EAAE;UACV;QACF,CAAC,EAAE,CAAC,IAAI,CAACmB,WAAW,IAAIf,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1C;IACF,CAAC;IACD+C,eAAe,EAAE,SAASA,eAAeA,CAAA,EAAG;MAC1C,IAAIH,CAAC,GAAG,IAAI,CAACC,cAAc;MAE3B,IAAI,IAAI,CAACjC,QAAQ,EAAE;QACjB,IAAIoC,IAAI,GAAG,IAAI,CAACF,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC9B,YAAY;QAEtD,IAAIgC,IAAI,EAAE;UACR,OAAOJ,CAAC,CAAC,KAAK,EAAE;YACd,OAAO,EAAE7C,GAAG,CAAC,eAAe;UAC9B,CAAC,EAAE,CAACiD,IAAI,CAAC,CAAC;QACZ;MACF;IACF,CAAC;IACDC,YAAY,EAAE,SAASA,YAAYA,CAAA,EAAG;MACpC,IAAIL,CAAC,GAAG,IAAI,CAACC,cAAc;MAE3B,IAAI,IAAI,CAACpC,KAAK,EAAE;QACd,IAAIuC,IAAI,GAAG,IAAI,CAACF,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI,CAACjC,SAAS;QAEhD,IAAImC,IAAI,EAAE;UACR,OAAOJ,CAAC,CAAC,KAAK,EAAE;YACd,IAAI,EAAE;cACJ,OAAO,EAAE,IAAI,CAACF;YAChB,CAAC;YACD,OAAO,EAAE3C,GAAG,CAAC,YAAY;UAC3B,CAAC,EAAE,CAACiD,IAAI,CAAC,CAAC;QACZ;MACF;IACF;EACF,CAAC;EACDE,MAAM,EAAE,SAASA,MAAMA,CAAA,EAAG;IACxB,IAAIN,CAAC,GAAGO,SAAS,CAAC,CAAC,CAAC;IACpB,IAAIC,WAAW,GAAGR,CAAC,CAAC,KAAK,EAAE;MACzB,KAAK,EAAE,aAAa;MACpB,KAAK,EAAE,aAAa;MACpB,OAAO,EAAE7C,GAAG,CAAC,aAAa;IAC5B,CAAC,CAAC;IACF,OAAO6C,CAAC,CAAC,KAAK,EAAE;MACd,OAAO,EAAE7C,GAAG,CAAC,CAAC;MACd,OAAO,EAAE;QACP,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,IAAI,CAACwB;MACpB;IACF,CAAC,EAAE,CAAC,IAAI,CAACF,SAAS,KAAK,MAAM,GAAG,IAAI,CAACyB,KAAK,CAAC,CAAC,GAAGM,WAAW,EAAE,IAAI,CAACT,UAAU,CAAC,CAAC,EAAE,IAAI,CAACI,eAAe,CAAC,CAAC,EAAE,IAAI,CAACE,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC5B,SAAS,KAAK,IAAI,GAAG,IAAI,CAACyB,KAAK,CAAC,CAAC,GAAGM,WAAW,CAAC,CAAC;EACpL;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}